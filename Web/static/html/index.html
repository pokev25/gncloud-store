<html ng-app="gncloud" lang="ko">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <!--FAVICON-->
    <link rel="apple-touch-icon" sizes="57x57" href="/gn_images/apple-icon-57x57.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/gn_images/favicon-16x16.png">
    <title>지앤클라우드 프라이빗</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/gn_css/bootstrap_gnwebsite_theme.css" />
    <link rel="stylesheet" href="/gn_css/loading.css" />
    <link rel="stylesheet" href="/gn_css/demo.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/gn_css/angularjs-notify.css" />



    <!-- 공통 JS 파일 시작 -->
    <script src="/js/vendor/angular/angular.min.js"></script>
    <script src="/js/vendor/angular/angular-route.min.js"></script>
    <script src="/js/vendor/angular/angularjs-notify.min.js"></script>
    <script src="/js/checklist-model.js"></script>
    <script src="/js/ng-file-upload.js"></script>
    <script src="/js/angular-ui-switch.js"></script>


    <!-- 서비스 컨트롤러 모음 -->
    <script type="text/javascript" src="/js/angular/app.js"></script>
    <script type="text/javascript" src="/js/angular/config/service.js"></script>
    <script type="text/javascript" src="/js/angular/controllers/main.js"></script>
    <script type="text/javascript" src="/js/angular/controllers/guestQna.js"></script>
    <script type="text/javascript" src="/js/angular/controllers/store.js"></script>
    <script type="text/javascript" src="/js/angular/controllers/supportlist.js"></script>
    <script type="text/javascript" src="/js/angular/controllers/supportdetail.js"></script>
    <script type="text/javascript" src="/js/angular/controllers/supportwrite.js"></script>
    <script type="text/javascript" src="/js/angular/controllers/supportMain.js"></script>
    <script type="text/javascript" src="/js/angular/controllers/joinEmail.js"></script>
    <script type="text/javascript" src="/js/angular/controllers/joinVerify.js"></script>
    <script type="text/javascript" src="/js/angular/controllers/checkUrl.js"></script>
    <script type="text/javascript" src="/js/angular/controllers/joinForm.js"></script>
    <script type="text/javascript" src="/js/angular/controllers/joincomplete.js"></script>
    <script type="text/javascript" src="/js/angular/controllers/userSetting.js"></script>
    <script type="text/javascript" src="/js/angular/controllers/intro.js"></script>
    <script language="javascript">
        function logout()
        {
            $.ajax({
                type: "GET",
                url: '/api/manager/vm/guestLogout',
                headers: {'Content-Type': 'application/json; charset=utf-8'},
                success: function () {
                    location.reload();
                    $('#login').show();
                    $('#signup').show();
                    $('#logout').hide();
                    $('#log-name').hide();
                }
            })
        }
    </script>
</head>

<body>
<nav class="navbar navbar-default gn-header">
    <div class="container">
        <!--지앤클라우드 로고-->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="storeMain.html">
                <img src="/gn_images/gncloud_header_logo.png" alt="지앤클라우드 프라이빗 홈">
            </a>
        </div> <!--class="navbar-header"-->
        <div id="navbar" class="navbar-collapse collapse gn-header-collapsed">
            <!--왼쪽 메뉴-->
            <ul class="nav navbar-nav">
                <li class="nav-link"><a href="#/store">스토어</a></li>
                <li class="nav-link active"><a href="#/supportmain">지원</a></li>
                <li class="nav-link"><a href="#/intro">소개</a></li>

            </ul><!--class="nav navbar-nav"-->

            <!--오른쪽 메뉴-->
            <div id="id" class="consol-btn pull-right">
                <span id ="login"><a data-toggle="modal" data-target="#loginModal">로그인</a></span>
                <span id ="log-name"><a href="#/usersetting"><span id="name"></span></a></span>
                |
                <span id="signup"><a href="#/joinemail">회원가입</a></span>
                <span id="logout"><a href="javascript:logout();">로그아웃</a></span>
                <button type="submit" value="submit" class="btn btn-default">클라우드 콘솔실행</button>
            </div>
        </div><!--/.nav-collapse -->
    </div> <!--class="container"-->
</nav> <!--class="navbar navbar-default navbar-fixed-top"-->
<!--HEADER END-->

<div class="container main-container">
    <ng-view></ng-view>
    <a href="#" class="scrollup"><i class="fa fa-angle-up active"></i></a>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="/js/bootstrap.min.js"></script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
    <script src="/js/holder.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/js/ie10-viewport-bug-workaround.js"></script>

</div>

<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
    <div class="modal-dialog modal-sm">
        <div class="pull-modal-container">
            <div class="login-logo"></div>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h1>로그인</h1>
            <br>
            <form>
                <div class="form-box">
                    <i class="glyphicon glyphicon-user"></i>
                    <input type="text" name="user" placeholder="Username" id="login_id">
                    <p class="middle-line"></p>
                    <i class="glyphicon glyphicon-lock"></i>
                    <input type="password" name="pass" placeholder="Password" id="login_pw">
                </div>

                <!--체크박스-->
                <div class="btn-id">
                    <input class="form-inputPop" type="checkbox" id="idSaveCheck" name="idSaveCheck"/>
                    <i></i>
                    <label for="idSaveCheck" class="label-id">아이디 저장</label>
                </div>

                <input type="button" class="btn btn-lg btn-block btn-gn-login" value="로그인" id="login_btn"><!--로그인--></input>
            </form>

        </div><!--class="pull-modal-container"-->
    </div><!--class="modal-dialog modal-sm"-->
</div><!--login-modal-->
<!--FOOTER-->
<footer class="footer">
    <div class="container">

        <div class="col-lg-2"><img src="/gn_images/gncloud_footer_logo.png" alt="footer logo"></div>
        <div class="col-lg-offset-1 col-lg-5 address">
            <address>주소 : 서울시 강남구 테헤란로 332, 현정빌딩 2층 (06212)</address>
            <p>2F, Hyunjung Bldg., 332, Teheran-ro, Gangnam-gu, Seoul, Korea (06212)</p>
            <address>
                <a href="mailto:#">mailto@gnclouds.com</a>
                <span>Tel : 02-000-0000</span>
                <span>Fax : 02-000-0000</span>
            </address>
        </div>
        <div class="col-lg-2 address">
            <p><a href="">약관</a></p>
            <p><a href="">개인정보보호</a></p>
        </div>
        <p class="col-lg-12 text-center gn-copyright">&copy; COPYRIGHT 지앤클라우드 ALL RIGHT RESERVED.</p>
        <div class="footer-img"></div>
    </div>
</footer>
<script language="javascript">
    $(function() {
        $("li").click(function() {
            // remove classes from all
            $("li").removeClass("active");
            // add class to the one we clicked
            $(this).addClass("active");
        });
    });
    $(document).ready(function() {
        getLogin();
        $('#logout').hide();
        $('#log-name').hide();
        $('#login_btn').click(function() {
            var formData = '{"login_id":"'+$("#login_id").val()+'","login_pw":"'+$("#login_pw").val()+'"}';
            $.ajax({
                type: "POST",
                data: formData,
                url: '/api/manager/vm/account',
                headers: {'Content-Type': 'application/json; charset=utf-8'},
                success:function(data) {
                    if (data.status == true) {
                        if (data.check == 'yes') {
                            location.reload();
                            login();
                        }
                        else if(data.check =='no') {
                            $('#error').show();
                        }
                    }else{
                        alert(data.message);
                    }
                }
            })
        });
        $(function() {
            $('nav a[href^="/' + location.pathname.split("/")[1] + '"]').addClass('active');
        });
        var namecheck =null;
        function login(){
            $.ajax({
                type: "GET",
                url: '/api/manager/vm/logincheck',
                headers: {'Content-Type': 'application/json; charset=utf-8'},
                success:function(data) {
                    if (data.status == true) {
                        if (data.check == 'yes') {
                            saveId();
                            namecheck = data.info.name;
                            $('#name').html(data.info.name);
                        }else if(data.check == 'no'){
                            namecheck = data.info.name;
                            $('#login').show();
                            $('#signup').show();
                            $('#logout').hide();
                            $('#log-name').hide();
                        }
                    }else{
                        alert(data.message);
                    }
                    if( namecheck != ""){
                        $('#login').hide();
                        $('#signup').hide();
                        $('#logout').show();
                        $('#log-name').show();
                    }else{
                        $('#login').show();
                        $('#signup').show();
                        $('#logout').hide();
                        $('#log-name').hide();
                    }
                }
            })
        }
        login();
    });
    function onKeyDown() {
        if (event.keyCode == '13') {
            $('#login_btn').click();
        }
    }
    // 쿠키에 id를 저장.
    function setsave(name, value, expiredays) {
        var today = new Date();
        today.setDate(today.getDate() + expiredays);
        document.cookie = name + "=" + escape(value) + "; path=/; expires="+ today.toGMTString() + ";";
    }

    // 버튼 클릭시 실행 function
    function saveId(){
        if (document.getElementById("idSaveCheck").checked) {
            saveLogin(document.getElementById("login_id").value);
        } else {
            saveLogin("");
        }
    }

    // id를 받아와 쿠키에 저장할지 쿠키에서 삭제할지 결정.
    function saveLogin(id) {
        if (id != "") {
            // userid 쿠키에 id 값을 7일간 저장
            setsave("login_id", id, 7);
        } else {
            // userid 쿠키 삭제
            setsave("login_id", id, -1);
        }
    }

    // 화면 로드시 아이디
    function getLogin() {

        // userid 쿠키에서 id 값을 가져온다.
        var cook = document.cookie + ";";
        var idx = cook.indexOf("login_id", 0);
        var val = "";

        if (idx != -1) {
            cook = cook.substring(idx, cook.length);
            begin = cook.indexOf("=", 0) + 1;
            end = cook.indexOf(";", begin);
            val = unescape(cook.substring(begin, end));
        }

// 가져온 쿠키값이 있으면
        if (val != "") {
            document.getElementById("login_id").value = val;
            document.getElementById("idSaveCheck").checked = true;
        }
    }
</script>
</body>
</html>

